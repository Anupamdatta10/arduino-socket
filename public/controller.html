<!DOCTYPE html>
<html>
<head>
  <title>Controller</title>
  <style>
    .controller-arrows {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 20px;
      position: fixed;         /* Add this */
      left: 30px;              /* Add this: distance from left */
      top: 50%;                /* Add this: vertically center */
      transform: translateY(-50%); /* Add this: vertically center */
    }
    .arrow-row {
      display: flex;
      justify-content: center;
    }
    .arrow-btn {
      width: 50px;
      height: 50px;
      font-size: 2rem;
      margin: 5px;
      cursor: pointer;
    }
    .arrow-row.middle {
      width: 160px;
      display: flex;
      justify-content: space-between;
    }
  </style>
</head>
<body>
  <h1>WebSocket Controller</h1>
  <div class="controller-arrows">
    <div class="arrow-row">
      <button class="arrow-btn" onclick="sendData('forward')">&#8593;</button>
    </div>
    <div class="arrow-row middle">
      <button class="arrow-btn" onclick="sendData('left')">&#8592;</button>
      <button class="arrow-btn" onclick="sendData('right')">&#8594;</button>
    </div>
    <div class="arrow-row">
      <button class="arrow-btn" onclick="sendData('backward')">&#8595;</button>
    </div>
  </div>

  <p id="status">Connecting...</p>
  <p id="log"></p>

  <script>
    // Use wss:// because Render uses HTTPS
    const socket = new WebSocket("wss://arduino-socket.onrender.com");
    //test locally with ws://localhost:3000
    const statusEl = document.getElementById("status");
    const logEl = document.getElementById("log");

    socket.onopen = () => {
      statusEl.textContent = "‚úÖ Connected to WebSocket server";
    };

    socket.onmessage = (event) => {
      const message = event.data;
      //logEl.innerHTML += `<br>üì® ${message}`;
    };

    socket.onclose = () => {
      statusEl.textContent = "üîå Disconnected from WebSocket server";
    };

    socket.onerror = (err) => {
      statusEl.textContent = "‚ùå WebSocket error";
      console.error(err);
    };

    function sendData(num) {
      if (socket.readyState === WebSocket.OPEN) {
        socket.send(`Button ${num}`);
       // logEl.innerHTML += `<br>‚û°Ô∏è Sent: Button ${num}`;
      } else {
        alert("WebSocket not connected");
      }
    }
  </script>
</body>
</html>
